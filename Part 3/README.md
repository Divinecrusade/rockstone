# Часть 3. SQL-задание
---

## Условие

**Дано:** набор данных в таблице `players` со структурой полей:
 `players(id INT, name VARCHAR, login_time DATETIME, device INT)`

**Задание:** сформулировать SQL-запросы для следующих случаев:
* Получить **5 самых активных устройств** – то есть пять значений поля device, с которых произошло наибольшее количество логинов пользователей (упорядочить по количеству логинов).
* Получить **среднее число логинов в день** за последние 7 дней (в расчете от текущей даты).

---

# Решение

*[см. коммит 0102e75 "feat: Implement required select queries"](https://github.com/Divinecrusade/rockstone/commit/0102e75e0d6342c9dc470b35eb50d3c496a1ab0e)*<br/>
*[см. коммит 2ad7653
"style: Remove redument signs '*' in the query's commentary"](https://github.com/Divinecrusade/rockstone/commit/2ad76531f8a861faf25aca776284dde955fe63c5)*

Использовалась локальная версия MySQL Community Server 9.30

В файле [init.sql](/Part%203/init.sql) представлены запросы инициализации БД и требуемой таблицы.

Хранимая процедура генерации данных (таблица заполнена 50 000 записями со случайными данными: именами из пула 15 имен, кодами девайсов от 0 до 29 и датами логинов с 07-07-2025 по 16-07-2025) приведена в файле [populate_table_players.sql](/Part%203/populate_table_players.sql)

При необходимости, дамп таблицы `players` есть в файле [players_dump.sql](/Part%203/players_dump.sql)

Непосредственные запросы выборки сохранены в файле [select.sql](/Part%203/select.sql)

*P.S. Во втором запросе делитель рассчитывается  агрегатной функцией `COUNT(DISTINCT DATE(login_time))`, а не заменяется константой `7.` (требуемое количество дней), поскольку возможны случаи когда никто не заходил в игру за день (например, были технические работы).*